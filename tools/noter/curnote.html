<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noter - Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="node_modules/text-security/text-security-disc.css">
    <link rel="stylesheet" href="node_modules/text-security/text-security-circle.css">
    <link rel="stylesheet" href="node_modules/text-security/text-security-square.css">
    <script type="module" src="https://md-block.verou.me/md-block.js"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js" integrity="sha512-LhccdVNGe2QMEfI3x4DVV3ckMRe36TfydKss6mJpdHjNFiV07dFpS2xzeZedptKZrwxfICJpez09iNioiSZ3hA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://unpkg.com/turndown/dist/turndown.js"></script>
</head>

<body data-bs-theme="dark" onload="read();">
    <center>
        <div style="display: flex; text-align: center; align-items: center; justify-content: center;">
            <button class="btn btn-dark" onclick="window.open('notes.html', '_self');">Back</button>
            &nbsp;&nbsp;
            <button class="btn btn-dark" onclick="share();">Share</button>
            &nbsp;&nbsp;
            <h1 id="title">Note</h1>
        </div>
        <p id="author">By User.</p>
        <hr size="1" color="black">
    </center>
    <md-block id="content"></md-block>
    <div id="id01" class="w3-modal">
        <div class="w3-modal-content">
          <div class="w3-container">
            <span onclick="document.getElementById('id01').style.display='none'" class="w3-button w3-display-topright">&times;</span>
            
            <h3>Share</h3>
            <p>
                <button class="btn btn-dark" onclick="copymd();">Copy Markdown</button>
                <button class="btn btn-dark" onclick="copyhtml();">Copy HTML</button>
            </p>
          </div>
        </div>
      </div>
    </div>
    <script src="mini.js"></script>
    <script>
        let title = sessionStorage.getItem("title");
        let text = sessionStorage.getItem("text");
        let bg = sessionStorage.getItem("bg");
        let fg = sessionStorage.getItem("fg");

        function read() {
            document.getElementById('title').innerHTML = title;
            document.getElementById('content').innerHTML = text;
            document.getElementById('author').innerHTML = 'By ' + localStorage.getItem("username");
            document.body.style.backgroundColor = bg;
            document.body.style.color = fg;
        }

        function share() {
            document.getElementById('id01').style.display='block';
        }

        function copymd() {
            var copyText = document.getElementById("content");
            var turndownService = new TurndownService()
            var markdown = turndownService.turndown(copyText.innerHTML)
            navigator.clipboard.writeText(markdown);
            alert('Copied Successfully!');
        }

        function copyhtml() {
            var copyText = document.getElementById("content");
            var copyhtml = copyText.innerHTML;
            navigator.clipboard.writeText(copyhtml);
            alert('Copied Successfully!');
        }
    </script>

</body>

</html>